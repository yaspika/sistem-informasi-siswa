<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sistem Informasi Siswa</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.17.5/xlsx.full.min.js"></script>
    <script type="module">
      import {{ initializeApp }} from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
      import {{ getFirestore, collection, addDoc, getDocs }} from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

      const firebaseConfig = {{
        apiKey: "AIzaSyCzuHPTqPQt5a14G_tia1dx-wSFK8CP8Nw",
        authDomain: "sistem-informasi-siswa-41025.firebaseapp.com",
        projectId: "sistem-informasi-siswa-41025",
        storageBucket: "sistem-informasi-siswa-41025.firebasestorage.app",
        messagingSenderId: "566617915457",
        appId: "1:566617915457:web:da339cb25463512b8586c0"
      }};

      const app = initializeApp(firebaseConfig);
      const db = getFirestore(app);

      // Simpan data siswa
      window.simpanData = async function () {{
        const nis = document.getElementById("nis").value;
        const nama = document.getElementById("nama").value;
        const kelas = document.getElementById("kelas").value;
        const jk = document.getElementById("jk").value;

        if (nis && nama && kelas && jk) {{
          await addDoc(collection(db, "siswa"), {{
            nis, nama, kelas, jk
          }});
          alert("Data berhasil disimpan");
          tampilkanData();
        }}
      }}

      // Tampilkan data siswa
      window.tampilkanData = async function () {{
        const list = document.getElementById("daftar");
        list.innerHTML = "";
        const querySnapshot = await getDocs(collection(db, "siswa"));
        querySnapshot.forEach((doc) => {{
          const data = doc.data();
          const row = document.createElement("div");
          row.className = "border p-2 my-1 rounded bg-white";
          row.innerText = `NIS: ${{data.nis}}, Nama: ${{data.nama}}, Kelas: ${{data.kelas}}, JK: ${{data.jk}}`;
          list.appendChild(row);
        }});
      }}

      window.onload = tampilkanData;
    </script>
  </head>
  <body class="bg-gray-100 p-4">
    <div class="max-w-xl mx-auto bg-white rounded shadow p-4">
      <h1 class="text-xl font-bold mb-4">Form Siswa</h1>
      <input id="nis" placeholder="NIS" class="w-full p-2 border mb-2" />
      <input id="nama" placeholder="Nama" class="w-full p-2 border mb-2" />
      <input id="kelas" placeholder="Kelas" class="w-full p-2 border mb-2" />
      <select id="jk" class="w-full p-2 border mb-2">
        <option value="">Pilih Jenis Kelamin</option>
        <option value="L">Laki-laki</option>
        <option value="P">Perempuan</option>
      </select>
      <button onclick="simpanData()" class="bg-blue-600 text-white px-4 py-2 rounded w-full">Simpan</button>
    </div>

    <div class="max-w-xl mx-auto mt-6">
      <h2 class="text-lg font-bold mb-2">Data Siswa</h2>
      <div id="daftar"></div>
    </div>
  </body>
</html>
